<nav-bar></nav-bar>
<div class="container-fluid">
<div class="row">
<div class="col-md-2">
    <legend>Projects</legend>
    <nav-column delegate="self"></nav-column>
    <br>
    <button type="button" class="btn btn-default btn-md" ng-click="createProject();" style="width: 100%">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> New Project
    </button>
</div>
<div class="col-md-10">

        <uib-tabset>
            <!--Metrics-->
            <uib-tab>
                <uib-tab-heading>
                    <i class="glyphicon glyphicon-th-list"></i> Metrics
                </uib-tab-heading>

                <br>
                <button type="button" class="btn btn-default btn-md btn-danger" ng-click="closeIterationPressed();">
                    <span class="glyphicon glyphicon-stop" aria-hidden="true"></span> Close Active Iteration
                </button>
                <br><br>


                <div class="row" ng-repeat="(phaseIndex, phase) in project.phases" style="width: 100%">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-heading">{{phase.title}} - {{projectService.status(phase)}}</div>
                            <table class="table">
                                <tr>
                                    <th>Iteration</th><th>status</th>
                                    <th>SLOC</th><th>Effort in person-month</th>
                                    <th>id</th>
                                </tr>
                                <tr ng-repeat="(iterationIndex, iteration) in phase.iterations">
                                    <td>{{iterationIndex + 1}}</td>
                                    <td>{{projectService.status(iteration)}}</td>
                                    <td>{{iteration.sloc}} ({{iteration.sloc / project.sloc | percentage: 2}})</td>
                                    <td>{{iteration.effort | number:4}} ({{iteration.effort / project.effort | percentage: 2}})</td>
                                    <td>{{iteration.id}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </uib-tab>

            <!--Defects-->
            <uib-tab>
                <uib-tab-heading>
                    <i class="glyphicon glyphicon-exclamation-sign"></i> Defects
                </uib-tab-heading>
                <div class="panel panel-default">
                    <defect-table defects="defects" delegate="self"></defect-table>
                </div>

            </uib-tab>

            <!--Developers-->
            <uib-tab>
                <uib-tab-heading>
                    <i class="glyphicon glyphicon-user"></i> Developers
                </uib-tab-heading>
                <div class="panel panel-default">
                    <div class="panel-heading">Developers</div>
                    <table class="table">
                        <tr>
                            <th>id</th><th>Username</th><th>Display name</th><th>email</th><th></th>
                        </tr>
                        <tr ng-repeat="dev in project.developers">
                            <td>{{dev.id}}</td>
                            <td>{{dev.username}}</td>
                            <td>{{dev.display_name}}</td>
                            <td>{{dev.email}}</td>
                            <td><a href ng-click="console.log('not implemented')">Remove</a></td>
                        </tr>
                    </table>
                </div>

            </uib-tab>
        </uib-tabset>




</div>
</div>
</div>